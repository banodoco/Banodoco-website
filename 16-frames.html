<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>16 Frames: Struggle & Triumph in the AnimateDiff Ecosystem</title>
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.151.3/build/three.module.js"
    }
  }
  </script>
  <link rel="icon" href="assets/logos/banodoco.png" type="image/png" />
  <link rel="shortcut icon" href="assets/logos/banodoco.png" type="image/png" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'space-mono': ['Space Mono', 'Roboto Mono', 'monospace'],
            'space-grotesk': ['Space Grotesk', 'sans-serif'],
            'inter': ['Inter', 'sans-serif'],
            'dancing': ['Dancing Script', 'cursive'],
            'allura': ['Allura', 'cursive'],
            'great-vibes': ['Great Vibes', 'cursive']
          },
          colors: {
            'banodoco-bg': '#fbf8ef',
            'banodoco-accent': '#FCC061',
            'banodoco-purple': '#5353a5'
          }
        }
      }
    }
  </script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&family=Space+Mono:wght@400;700&family=Allura&family=Great+Vibes&display=swap"
    rel="stylesheet"
  />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

  <!-- Main CSS -->
  <link rel="stylesheet" href="src/styles/main.css" />

  <!-- Header & Footer component CSS -->
  <link rel="stylesheet" href="src/styles/components/header.css" />
  <link rel="stylesheet" href="src/styles/components/footer.css" />

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  
  <style>
    /* Essential custom animations that can't be replaced with Tailwind */
    @keyframes floatUp {
      0%   { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
      25%  { transform: translateY(-20px) rotate(-5deg) scale(1.1); }
      50%  { transform: translateY(-40px) rotate(3deg) scale(1); }
      75%  { opacity: 0.7; transform: translateY(-60px) rotate(-2deg) scale(0.9); }
      100% { opacity: 0; transform: translateY(-80px) rotate(0deg) scale(0.8); }
    }

    @keyframes floatUpQuickly {
      0%   { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
      15%  { opacity: 0.95; transform: translateY(-8px) rotate(-8deg) scale(1.05); }
      30%  { opacity: 0.9; transform: translateY(-16px) rotate(6deg) scale(1.05); }
      45%  { opacity: 0.6; transform: translateY(-24px) rotate(-4deg) scale(0.95); }
      60%  { opacity: 0.3; transform: translateY(-32px) rotate(3deg) scale(0.9); }
      75%  { opacity: 0.1; transform: translateY(-40px) rotate(-2deg) scale(0.85); }
      90%  { opacity: 0.05; transform: translateY(-48px) rotate(1deg) scale(0.8); }
      100% { opacity: 0; transform: translateY(-56px) rotate(0deg) scale(0.7); }
    }

    /* Page load fade-in animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Initial page load animations */
    .fade-in-up {
      opacity: 0;
      animation: fadeInUp 0.8s ease-out forwards;
    }

    .fade-in-down {
      opacity: 0;
      animation: fadeInDown 0.6s ease-out forwards;
    }

    .fade-in-left {
      opacity: 0;
      animation: fadeInLeft 0.8s ease-out forwards;
    }

    .fade-in-right {
      opacity: 0;
      animation: fadeInRight 0.8s ease-out forwards;
    }

    .fade-in {
      opacity: 0;
      animation: fadeIn 1s ease-out forwards;
    }

    .scale-in {
      opacity: 0;
      animation: scaleIn 0.6s ease-out forwards;
    }

    /* Staggered animations for sequential elements */
    .stagger-1 { animation-delay: 0.1s; }
    .stagger-2 { animation-delay: 0.2s; }
    .stagger-3 { animation-delay: 0.3s; }
    .stagger-4 { animation-delay: 0.4s; }
    .stagger-5 { animation-delay: 0.5s; }
    .stagger-6 { animation-delay: 0.6s; }
    .stagger-7 { animation-delay: 0.7s; }
    .stagger-8 { animation-delay: 0.8s; }
    .stagger-9 { animation-delay: 0.9s; }
    

    /* Scroll-triggered animations */
    .scroll-fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .scroll-fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .scroll-fade-in-left {
      opacity: 0;
      transform: translateX(-30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .scroll-fade-in-left.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .scroll-fade-in-right {
      opacity: 0;
      transform: translateX(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .scroll-fade-in-right.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .scroll-scale-in {
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .scroll-scale-in.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* Staggered scroll animations */
    .scroll-stagger-1 { transition-delay: 0.1s; }
    .scroll-stagger-2 { transition-delay: 0.2s; }
    .scroll-stagger-3 { transition-delay: 0.3s; }
    .scroll-stagger-4 { transition-delay: 0.4s; }
    .scroll-stagger-5 { transition-delay: 0.5s; }
    .scroll-stagger-6 { transition-delay: 0.6s; }
    .scroll-stagger-7 { transition-delay: 0.7s; }
    .scroll-stagger-8 { transition-delay: 0.8s; }
    .scroll-stagger-9 { transition-delay: 0.9s; }
    .scroll-stagger-10 { transition-delay: 1.0s; }

    /* Faster animations specifically for Q&A items */
    .qa-item.scroll-fade-in {
      transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }
    
    /* Faster stagger delays for Q&A items */
    .qa-item.scroll-stagger-1 { transition-delay: 0.05s; }
    .qa-item.scroll-stagger-2 { transition-delay: 0.1s; }
    .qa-item.scroll-stagger-3 { transition-delay: 0.15s; }
    .qa-item.scroll-stagger-4 { transition-delay: 0.2s; }
    .qa-item.scroll-stagger-5 { transition-delay: 0.25s; }
    .qa-item.scroll-stagger-6 { transition-delay: 0.3s; }
    .qa-item.scroll-stagger-7 { transition-delay: 0.35s; }
    .qa-item.scroll-stagger-8 { transition-delay: 0.4s; }
    .qa-item.scroll-stagger-9 { transition-delay: 0.45s; }

    /* Utility classes for common patterns */
    .glass-overlay {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    /* Floating emoji positioning */
    .floating-emoji {
      position: absolute;
      pointer-events: none;
      z-index: 1000;
      will-change: transform, opacity;
    }

    /* Dropzone smooth hover animation */
    .dropzone-container {
      will-change: transform, box-shadow, border-color;
      backface-visibility: hidden;
      transform: translate3d(0, 0, 0);
      transition: all 0.3s ease-out;
    }

    .dropzone-container:hover {
      transform: translateY(-4px);
      border-color: rgba(252, 192, 97, 0.7);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .dropzone-container:hover .absolute.inset-0.opacity-20 {
      opacity: 0.3;
    }

    .dropzone-container:hover .blur-sm {
      opacity: 0.2;
    }

    .dropzone-container:hover .text-center {
      transform: translateY(-2px);
    }

    .dropzone-container:hover .w-20.h-20 {
      transform: scale(1.08);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    .dropzone-container:hover .w-10.h-10 {
      transform: scale(1.1);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }
    
    .dropzone-container:hover .absolute.-top-2.-right-2 {
      opacity: 1;
      transform: translate(8px, -8px) rotate(15deg) scale(1.2);
    }

    .dropzone-container:hover .absolute.-bottom-1.-left-2 {
      opacity: 1;
      transform: translate(-8px, 8px) rotate(-15deg) scale(1.2);
    }

    .dropzone-container:hover .absolute.top-1.-left-3 {
      opacity: 1;
      transform: translate(-8px, -4px) rotate(-25deg) scale(1.2);
    }
    
    .dropzone-container:hover h3 {
      color: #1a1a1a;
      transform: scale(1.02);
    }
    
    .dropzone-container:hover p.text-yellow-700 {
      color: #b45309;
    }

    .dropzone-container:hover .flex-wrap span {
      transform: translateY(-3px);
      background-color: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* Unified spinner styles */
    .spinner, .mini-spinner {
      border-radius: 50%;
      border-style: solid;
      border-color: #e0e0e0;
      display: inline-block;
      animation: spin 1s linear infinite;
    }
    .spinner {
      width: 20px;
      height: 20px;
      border-width: 2px;
      border-top-color: #5353a5;
    }
    .mini-spinner {
      width: 14px;
      height: 14px;
      border-width: 2px;
      border-top-color: #FCC061;
      margin-right: 0.5rem;
      animation-duration: 0.8s;
    }

    /* Hide ecosystem visualization on mobile */
    @media (max-width: 1024px) {
    .ecosystem-visualization {
        display: none !important;
      }
    }

    /* Override excessive margin from main.css */
    .content-section:first-of-type {
        margin-top: -2rem !important;
    }

    /* Add proper spacing above title on mobile */
    @media (max-width: 1024px) {
      .content-section:first-of-type {
        margin-top: 1rem !important;
      }
    }

    /* Ensure mobile header doesn't overlap content */
    @media (max-width: 768px) {
      .content-section:first-of-type {
        margin-top: 1.5rem !important;
      }
    }

    /* Reduce space below subtitle */
    .hero-section h2 {
      margin-bottom: 1rem !important;
    }

    @media (min-width: 1024px) {
      .hero-section h2 {
        margin-bottom: 1.5rem !important;
      }
    }

    /* More specific targeting for subtitle spacing */
    .content-section:first-of-type h2 {
      margin-bottom: 1rem !important;
    }

    @media (min-width: 1024px) {
      .content-section:first-of-type h2 {
        margin-bottom: 1.5rem !important;
      }
    }

    /* Also target the container div that wraps the titles */
    .content-section:first-of-type > div:first-child {
      margin-bottom: 1.5rem !important;
    }

    @media (min-width: 1024px) {
      .content-section:first-of-type > div:first-child {
        margin-bottom: 2rem !important;
      }
    }

    /* Lightbox Styles */
    #lightbox {
      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }

    /* Override main.css lightbox styles that are causing the media to hit screen edges */
    #lightbox #lightbox-content video,
    #lightbox #lightbox-content img {
      max-width: 70vw !important;
      max-height: 70vh !important;
      width: auto !important;
      height: auto !important;
    }

    .form-upload-note {
      font-size: 12px !important;
      line-height: 1.2 !important;
      opacity: 0.7 !important;
    }

    /* Featured items animation */
    .featured-item {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .featured-item:nth-child(1) { animation-delay: 0.1s; }
    .featured-item:nth-child(2) { animation-delay: 0.2s; }
    .featured-item:nth-child(3) { animation-delay: 0.3s; }
    .featured-item:nth-child(4) { animation-delay: 0.4s; }
    .featured-item:nth-child(5) { animation-delay: 0.5s; }
    .featured-item:nth-child(6) { animation-delay: 0.6s; }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Enhanced hero title styling */
    .hero-title-enhanced {
      color: #1a1a1a;
      letter-spacing: -0.02em;
      position: relative;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      background: none;
      display: inline-block; /* Shrink to text width so the underline segments stay within title bounds */
    }

    .hero-title-enhanced:hover {
      color: #5353a5;
      transition: color 0.3s ease;
    }

    /* Container for 16 segments */
    .title-segments {
      position: absolute;
      bottom: -6px; /* Align closely with static gradient line */
      left: 50%;
      transform: translateX(-50%);
      width: 64px; /* Match static line width */
      height: 4px;
      z-index: 10; /* Ensure it appears above static line */
      pointer-events: none; /* Let hero-title receive hover */
    }

    /* Individual segment styling */
    .title-segment {
      position: absolute;
      top: 0;
      height: 4px; /* Match the gradient line height */
      width: calc(64px / 16); /* Simple equal division */
      background: linear-gradient(90deg, #5353a5, #FCC061);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.2s ease-out;
      border-radius: 9999px; /* Match rounded-full */
    }

    /* Position each of the 16 segments - simplified positioning */
    .title-segment:nth-child(1) { left: calc(0 * (64px / 16)); }
    .title-segment:nth-child(2) { left: calc(1 * (64px / 16)); }
    .title-segment:nth-child(3) { left: calc(2 * (64px / 16)); }
    .title-segment:nth-child(4) { left: calc(3 * (64px / 16)); }
    .title-segment:nth-child(5) { left: calc(4 * (64px / 16)); }
    .title-segment:nth-child(6) { left: calc(5 * (64px / 16)); }
    .title-segment:nth-child(7) { left: calc(6 * (64px / 16)); }
    .title-segment:nth-child(8) { left: calc(7 * (64px / 16)); }
    .title-segment:nth-child(9) { left: calc(8 * (64px / 16)); }
    .title-segment:nth-child(10) { left: calc(9 * (64px / 16)); }
    .title-segment:nth-child(11) { left: calc(10 * (64px / 16)); }
    .title-segment:nth-child(12) { left: calc(11 * (64px / 16)); }
    .title-segment:nth-child(13) { left: calc(12 * (64px / 16)); }
    .title-segment:nth-child(14) { left: calc(13 * (64px / 16)); }
    .title-segment:nth-child(15) { left: calc(14 * (64px / 16)); }
    .title-segment:nth-child(16) { left: calc(15 * (64px / 16)); }

    /* Hover animation - stagger the segments */
    .hero-title-enhanced:hover .title-segment:nth-child(1) { transform: scaleX(1); transition-delay: 0.05s; }
    .hero-title-enhanced:hover .title-segment:nth-child(2) { transform: scaleX(1); transition-delay: 0.1s; }
    .hero-title-enhanced:hover .title-segment:nth-child(3) { transform: scaleX(1); transition-delay: 0.15s; }
    .hero-title-enhanced:hover .title-segment:nth-child(4) { transform: scaleX(1); transition-delay: 0.2s; }
    .hero-title-enhanced:hover .title-segment:nth-child(5) { transform: scaleX(1); transition-delay: 0.25s; }
    .hero-title-enhanced:hover .title-segment:nth-child(6) { transform: scaleX(1); transition-delay: 0.3s; }
    .hero-title-enhanced:hover .title-segment:nth-child(7) { transform: scaleX(1); transition-delay: 0.35s; }
    .hero-title-enhanced:hover .title-segment:nth-child(8) { transform: scaleX(1); transition-delay: 0.4s; }
    .hero-title-enhanced:hover .title-segment:nth-child(9) { transform: scaleX(1); transition-delay: 0.45s; }
    .hero-title-enhanced:hover .title-segment:nth-child(10) { transform: scaleX(1); transition-delay: 0.5s; }
    .hero-title-enhanced:hover .title-segment:nth-child(11) { transform: scaleX(1); transition-delay: 0.55s; }
    .hero-title-enhanced:hover .title-segment:nth-child(12) { transform: scaleX(1); transition-delay: 0.6s; }
    .hero-title-enhanced:hover .title-segment:nth-child(13) { transform: scaleX(1); transition-delay: 0.65s; }
    .hero-title-enhanced:hover .title-segment:nth-child(14) { transform: scaleX(1); transition-delay: 0.7s; }
    .hero-title-enhanced:hover .title-segment:nth-child(15) { transform: scaleX(1); transition-delay: 0.75s; }
    .hero-title-enhanced:hover .title-segment:nth-child(16) { transform: scaleX(1); transition-delay: 0.8s; }

    /* Smoother animation override */
    .title-segment {
      transition: transform 0.2s ease-out !important;
    }

    /* Adjusted timing for smoother progression */
    .hero-title-enhanced:hover .title-segment:nth-child(1) { transition-delay: 0.0s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(2) { transition-delay: 0.04s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(3) { transition-delay: 0.08s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(4) { transition-delay: 0.12s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(5) { transition-delay: 0.16s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(6) { transition-delay: 0.2s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(7) { transition-delay: 0.24s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(8) { transition-delay: 0.28s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(9) { transition-delay: 0.32s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(10) { transition-delay: 0.36s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(11) { transition-delay: 0.4s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(12) { transition-delay: 0.44s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(13) { transition-delay: 0.48s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(14) { transition-delay: 0.52s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(15) { transition-delay: 0.56s !important; }
    .hero-title-enhanced:hover .title-segment:nth-child(16) { transition-delay: 0.6s !important; }

    /* Fallback for browsers that don't support background-clip */
    @supports not (-webkit-background-clip: text) {
      .hero-title-enhanced {
        color: #1a1a1a !important;
        background: none !important;
      }
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Enhanced body text */
    .enhanced-body-text {
      position: relative;
    }

    /* Enhanced paragraph styling */
    .enhanced-paragraph {
      position: relative;
      margin-bottom: 0.5rem !important;
      padding: 0.25rem 0.75rem !important;
      padding-left: 0.75rem !important;
      margin-left: -0.75rem !important;
      border-radius: 0 8px 8px 0;
      transition: all 0.4s ease;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(252, 192, 97, 0.03) 100%);
    }

    .enhanced-paragraph:hover {
      border-left-color: rgba(252, 192, 97, 0.6);
      background: linear-gradient(135deg, rgba(252, 192, 97, 0.06) 0%, rgba(83, 83, 165, 0.04) 100%);
      transform: translateX(4px);
      box-shadow: 0 4px 15px rgba(252, 192, 97, 0.1);
    }

    /* First paragraph gets special treatment */
    .enhanced-paragraph:first-of-type {
      font-size: 1.125rem;
      line-height: 1.8;
      font-weight: 500;
      background: linear-gradient(135deg, rgba(252, 192, 97, 0.08) 0%, rgba(83, 83, 165, 0.06) 100%);
      border-left-color: rgba(252, 192, 97, 0.3);
    }

    @media (min-width: 1024px) {
      .enhanced-paragraph:first-of-type {
        font-size: 1.25rem;
        line-height: 1.8;
      }
    }

    /* Enhanced body text container */
    .enhanced-body-text {
      position: relative;
    }

    .enhanced-body-text::before {
      content: '';
      position: absolute;
      left: -2rem;
      top: 0;
      bottom: 0;
      width: 1px;
      background: linear-gradient(to bottom, 
        transparent 0%, 
        rgba(252, 192, 97, 0.3) 20%, 
        rgba(83, 83, 165, 0.3) 50%, 
        rgba(252, 192, 97, 0.3) 80%, 
        transparent 100%
      );
    }

    @media (max-width: 1024px) {
      .enhanced-body-text::before {
        display: none;
      }
      
      .enhanced-paragraph {
        margin-left: 0;
        padding-left: 0.5rem;
        border-left-width: 2px;
      }
    }

    /* Hover Box for key phrases */
    #key-phrase-hover-box {
      position: fixed;
      z-index: 10000;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
      pointer-events: none;
      opacity: 0;
      transform: scale(0.95) translateY(10px);
      transition: opacity 0.15s ease-out, transform 0.15s ease-out;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      display: grid;
      gap: 4px;
      width: auto;
      max-width: 300px;
      height: auto;
    }

    #key-phrase-hover-box.visible {
      opacity: 1;
      transform: scale(1) translateY(0);
    }

    /* Static hover-box variant */
    #key-phrase-hover-box.static {
      pointer-events: auto;
    }

    .hover-box-item {
      position: relative;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .hover-box-item.visible {
      opacity: 1;
      transform: translateY(0);
    }

    #key-phrase-hover-box img {
      width: 100%;
      height: auto;
      border-radius: 4px;
      background-color: #f0f0f0;
      display: block;
    }

    .hover-box-item img {
      aspect-ratio: 1 / 1;
      object-fit: cover;
    }

    .frame-number {
      position: absolute;
      top: 4px;
      left: 4px;
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      border-radius: 3px;
      padding: 1px 5px;
      font-size: 12px;
      font-weight: bold;
      line-height: 1;
      pointer-events: none;
      font-family: 'Space Mono', monospace;
      opacity: 1;
      transform: scale(1);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .frame-number.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* Info-box styles */
    .info-box-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .info-box-content img {
      max-width: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 150ms;
      object-fit: contain;
    }

    .info-box-content p {
      margin: 0;
      font-size: 13px;
      line-height: 1.5;
      text-align: center;
      color: #333;
      font-family: 'Inter', sans-serif;
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
    }

    #key-phrase-hover-box.visible .info-box-content img,
    #key-phrase-hover-box.visible .info-box-content p {
      opacity: 1;
      transform: none;
    }

    /* Disable yellow hover on interactive key-phrases */
    .key-phrase[data-hover-box]:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.1) 50%, transparent 100%);
    }

    .key-phrase[data-hover-box] {
      border-bottom: 2px dotted rgba(83, 83, 165, 0.4);
      cursor: help;
    }

    /* Key phrases highlighting */
    .key-phrase {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.15) 50%, transparent 100%);
      padding: 0.05em 0.15em; /* reduce extra space */
      border-radius: 3px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .key-phrase:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.25) 50%, transparent 100%);
    }

    .key-phrase-red {
      background: linear-gradient(120deg, transparent 0%, rgba(239, 68, 68, 0.15) 50%, transparent 100%);
      padding: 0.05em 0.15em;
      border-radius: 3px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .key-phrase-red:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(239, 68, 68, 0.25) 50%, transparent 100%);
    }

    .key-phrase-green {
      background: linear-gradient(120deg, transparent 0%, rgba(34, 197, 94, 0.15) 50%, transparent 100%);
      padding: 0.05em 0.15em;
      border-radius: 3px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .key-phrase-green:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(34, 197, 94, 0.25) 50%, transparent 100%);
    }

    /* Enhanced signature styling */
    .enhanced-signature {
      position: relative;
      display: inline-block;
      background: linear-gradient(135deg, rgba(252, 192, 97, 0.08) 0%, rgba(83, 83, 165, 0.08) 100%);
      padding: 1rem 1.5rem;
      border-radius: 8px;
      border: 1px solid rgba(252, 192, 97, 0.2);
      margin-top: 1.5rem;
      transition: all 0.3s ease;
    }

    .enhanced-signature:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border-color: rgba(252, 192, 97, 0.4);
    }

    /* Improved mobile responsiveness for enhanced elements */
    @media (max-width: 1024px) {
      .enhanced-paragraph {
        margin-left: 0;
        padding-left: 0.3rem;
      }
    }

    /* Custom style for select dropdown arrow */
    #created-month {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding-right: 2.5rem; /* Make space for arrow */
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.75rem center;
      background-repeat: no-repeat;
      background-size: 1.5em 1.5em;
    }

    /* Mobile video controls */
    .mobile-video {
      cursor: pointer;
      position: relative;
    }

    .mobile-video::-webkit-media-controls {
      display: none !important;
    }

    .mobile-video::-webkit-media-controls-panel {
      display: none !important;
    }

    .mobile-video::-webkit-media-controls-play-button {
      display: none !important;
    }

    .mobile-video::-webkit-media-controls-start-playback-button {
      display: none !important;
    }

    .mobile-video::media-controls {
      display: none !important;
    }

    .mobile-video::media-controls-panel {
      display: none !important;
    }

    /* Featured video mobile behavior */
    .featured-video-mobile {
      cursor: pointer;
      position: relative;
    }

    .featured-video-mobile::-webkit-media-controls {
      display: none !important;
    }

    .featured-video-mobile::-webkit-media-controls-panel {
      display: none !important;
    }

    .featured-video-mobile::-webkit-media-controls-play-button {
      display: none !important;
    }

    .featured-video-mobile::-webkit-media-controls-start-playback-button {
      display: none !important;
    }

    /* Video tap indicator - subtle pulse effect */
    .video-tap-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 10;
    }

    .video-container:hover .video-tap-indicator {
      opacity: 1;
    }

    @media (max-width: 1024px) {
      .video-container .video-tap-indicator {
        opacity: 0.7;
      }
    }

    /* Play button icon */
    .play-icon {
      width: 0;
      height: 0;
      border-left: 20px solid #333;
      border-top: 12px solid transparent;
      border-bottom: 12px solid transparent;
      margin-left: 4px;
    }

    /* Prevent horizontal scrolling on mobile */
    html, body {
      overflow-x: hidden;
      max-width: 100vw;
    }

    * {
      box-sizing: border-box;
    }

    .container {
      max-width: 100%;
      overflow-x: hidden;
    }

    /* Ensure all content stays within viewport */
    .content-section {
      max-width: 100%;
      overflow-x: hidden;
    }

    /* Fix any potential grid overflow */
    .grid {
      max-width: 100%;
    }

    /* Ensure cards don't cause overflow */
    .featured-item {
      max-width: 100%;
    }

    /* Ensure ecosystem visualization doesn't cause overflow */
    .ecosystem-visualization {
      max-width: 100%;
      overflow: hidden;
    }

    /* Ensure hero section doesn't cause overflow */
    .hero-section,
    .hero-section > div {
      max-width: 100%;
      overflow-x: hidden;
    }

    /* Remove internal scrollbars in hero section on desktop */
    .content-section:first-of-type {
      overflow: visible !important; /* Ensure entire hero section shows without internal scrollbar */
    }

    /* Ensure the ecosystem visualization wrapper does not add scrollbars */
    .ecosystem-visualization > div {
      overflow: visible !important;
    }

    /* Ensure Q&A section does not introduce its own scrollbars */
    #qa-section {
      overflow: visible !important;
    }

    /* Prevent each QA item from clipping expanded answers on desktop */
    .qa-item {
      overflow: visible !important;
    }

    /* Info-box styles */
    .info-box-image {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
      object-fit: contain;
    }

    #key-phrase-hover-box.visible .info-box-image {
      opacity: 1;
      transform: none;
    }

    /* Disable yellow hover on interactive key-phrases */
    .key-phrase[data-hover-box]:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.1) 50%, transparent 100%);
    }

    .info-box-video {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
    }

    #key-phrase-hover-box.visible .info-box-video {
      opacity: 1;
      transform: none;
    }

    /* Disable yellow hover on interactive key-phrases */
    .key-phrase[data-hover-box]:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.1) 50%, transparent 100%);
    }

    /* Info-box styles */
    .info-box-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .info-box-wrapper img {
      max-width: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
      object-fit: contain;
    }

    /* Image overlay text for attribution */
    .image-overlay-text {
      position: absolute;
      bottom: 8px;
      left: 8px;
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 100ms;
      z-index: 10;
    }

    #key-phrase-hover-box.visible .image-overlay-text {
      opacity: 1;
      transform: translateY(0);
    }

    .info-box-wrapper p {
      margin: 0;
      font-size: 13px;
      line-height: 1.5;
      text-align: center;
      color: #333;
      font-family: 'Inter', sans-serif;
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
    }

    #key-phrase-hover-box.visible .info-box-wrapper img,
    #key-phrase-hover-box.visible .info-box-wrapper p {
      opacity: 1;
      transform: none;
    }

    .info-box-wrapper a {
        color: #5353a5;
        font-weight: 500;
        text-decoration: underline;
        transition: color 0.2s ease;
    }

    .info-box-wrapper a:hover {
        color: #FCC061;
    }

    .contact-links {
        display: flex;
        gap: 16px;
        align-items: center;
        justify-content: center;
        margin-top: 8px;
    }

    .contact-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        color: #5353a5;
        text-decoration: none;
        border-radius: 8px;
        background: rgba(83, 83, 165, 0.1);
        transition: all 0.2s ease;
    }

    .contact-links a:hover {
        color: #FCC061;
        background: rgba(252, 192, 97, 0.2);
        transform: translateY(-2px);
    }

    .contact-links svg {
        width: 20px;
        height: 20px;
    }

    .info-box-video {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
    }

    #key-phrase-hover-box.visible .info-box-video {
      opacity: 1;
      transform: none;
    }

    /* Disable yellow hover on interactive key-phrases */
    .key-phrase[data-hover-box]:hover {
      background: linear-gradient(120deg, transparent 0%, rgba(252, 192, 97, 0.1) 50%, transparent 100%);
    }

    /* Info-box styles */
    .info-box-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .info-box-wrapper img {
      max-width: 100%;
      border-radius: 4px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
      object-fit: contain;
    }

    /* Image overlay text for attribution */
    .image-overlay-text {
      position: absolute;
      bottom: 8px;
      left: 8px;
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 100ms;
      z-index: 10;
    }

    #key-phrase-hover-box.visible .image-overlay-text {
      opacity: 1;
      transform: translateY(0);
    }

    .info-box-wrapper p {
      margin: 0;
      font-size: 13px;
      line-height: 1.5;
      text-align: center;
      color: #333;
      font-family: 'Inter', sans-serif;
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      transition-delay: 50ms;
    }

    #key-phrase-hover-box.visible .info-box-wrapper img,
    #key-phrase-hover-box.visible .info-box-wrapper p {
      opacity: 1;
      transform: none;
    }

    .info-box-wrapper a {
        color: #5353a5;
        font-weight: 500;
        text-decoration: underline;
        transition: color 0.2s ease;
    }

    .info-box-wrapper a:hover {
        color: #FCC061;
    }

    /* Make paragraphs less blocky */
    .enhanced-paragraph {
      margin-bottom: 0.5rem !important;
      padding: 0.25rem 0.75rem !important;
      padding-left: 0.75rem !important;
      margin-left: -0.75rem !important;
    }

    /* Page-specific header styling - center logo and hide text */
    .site-header {
      display: flex !important;
      justify-content: center !important;
      padding: 0 !important;
      margin: 0 !important; /* Reset margin for mobile */
    }
    
    .site-header a {
      justify-content: center !important;
      display: flex !important;
      align-items: center !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    
    .site-header .site-title {
      display: none !important;
    }

    /* Adjust logo size on this page */
    .site-header img {
      width: 60px !important;
      height: 60px !important;
      margin: 0 !important;
    }

    /* Container for 16 segments */
    .title-segments {
      position: absolute;
      bottom: -6px; /* Align closely with static gradient line */
      left: 50%;
      transform: translateX(-50%);
      width: 64px; /* Match static line width */
      height: 4px;
      z-index: 10; /* Ensure it appears above static line */
      pointer-events: none; /* Let hero-title receive hover */
    }

    /* Individual segment styling */
    .title-segment {
      position: absolute;
      top: 0;
      height: 4px; /* Match the gradient line height */
      width: calc(64px / 16); /* Simple equal division */
      background: linear-gradient(90deg, #5353a5, #FCC061);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.2s ease-out;
      border-radius: 9999px; /* Match rounded-full */
    }

    /* Position each of the 16 segments - simplified positioning */
    .title-segment:nth-child(1) { left: calc(0 * (64px / 16)); }
    .title-segment:nth-child(2) { left: calc(1 * (64px / 16)); }
    .title-segment:nth-child(3) { left: calc(2 * (64px / 16)); }
    .title-segment:nth-child(4) { left: calc(3 * (64px / 16)); }
    .title-segment:nth-child(5) { left: calc(4 * (64px / 16)); }
    .title-segment:nth-child(6) { left: calc(5 * (64px / 16)); }
    .title-segment:nth-child(7) { left: calc(6 * (64px / 16)); }
    .title-segment:nth-child(8) { left: calc(7 * (64px / 16)); }
    .title-segment:nth-child(9) { left: calc(8 * (64px / 16)); }
    .title-segment:nth-child(10) { left: calc(9 * (64px / 16)); }
    .title-segment:nth-child(11) { left: calc(10 * (64px / 16)); }
    .title-segment:nth-child(12) { left: calc(11 * (64px / 16)); }
    .title-segment:nth-child(13) { left: calc(12 * (64px / 16)); }
    .title-segment:nth-child(14) { left: calc(13 * (64px / 16)); }
    .title-segment:nth-child(15) { left: calc(14 * (64px / 16)); }
    .title-segment:nth-child(16) { left: calc(15 * (64px / 16)); }

    /* Hover animation to show the line segments when hovered */
    .title-segments:hover .title-segment {
      transform: scaleX(1) !important;
    }

    /* Remove hover states from first paragraph key phrases */
    .first-paragraph-no-hover .key-phrase {
      background: none !important;
      padding: 0 !important;
      border-radius: 0 !important;
      font-weight: normal !important;
      transition: none !important;
    }

    .first-paragraph-no-hover .key-phrase:hover {
      background: none !important;
      cursor: default !important;
    }

    /* Only reduce space on larger screens */
    @media (min-width: 1024px) {
      .site-header {
        margin: 0 0 -3rem 0 !important; /* Reduce space below logo on desktop only */
      }
    }
  </style>
</head>

<body class="ownership-page bg-banodoco-bg font-space-mono text-gray-800 leading-relaxed overflow-x-hidden">
  <canvas id="plantCanvas"></canvas>
  <div class="plant-overlay"></div>
  <!-- POM Border -->
  <div class="inner-border"></div>

  <div class="container max-w-6xl mx-auto px-8 pt-8 pb-6 relative z-10 overflow-x-hidden">
    <!-- Site Header -->
    <div id="header"></div>
    <script>
      fetch('src/components/header.html')
        .then(response => response.text())
        .then(html => { document.getElementById('header').innerHTML = html; });
    </script>

    <!-- Hero Section -->
    <section class="content-section mb-16">
      <!-- Centered Single Column Layout -->
      <div class="max-w-4xl mx-auto">
        <!-- Enhanced Title Section with Better Hierarchy -->
        <div class="text-center mb-8 lg:mb-10 fade-in-up">
          <h1 class="hero-title-enhanced text-4xl lg:text-6xl xl:text-7xl font-space-grotesk font-bold leading-tight mb-2 lg:mb-3">
            16 Frames
          </h1>
          <div class="w-16 h-1 bg-gradient-to-r from-banodoco-accent to-banodoco-purple mx-auto mb-4 lg:mb-6 rounded-full"></div>
          <h2 class="text-lg lg:text-xl xl:text-2xl font-space-grotesk font-medium text-gray-600 leading-relaxed max-w-2xl mx-auto">
            Help me tell the story of the AnimateDiff Ecosystem
          </h2>
        </div>
        
        <!-- Single Column Text Content -->
        <div class="enhanced-body-text space-y-2 text-base lg:text-lg font-inter text-gray-700 leading-relaxed max-w-3xl mx-auto">
          <p class="first-paragraph-no-hover fade-in-up stagger-1 text-lg lg:text-xl leading-relaxed mb-0">
            <span class="key-phrase">AnimateDiff</span> was one of the first popular video models.
          </p>
          <p class="first-paragraph-no-hover fade-in-up stagger-1 text-lg lg:text-xl leading-relaxed mb-6">
            However, when it launched in 2023, it could generate just <span class="key-phrase">16 low resolution frames</span> from a text prompt:
          </p>
          
          <!-- Spacer to equalise space above -->
          <div class="h-3 lg:h-4"></div>

          <div class="mb-20 lg:mb-24 fade-in-up stagger-2">
            <!-- Background Pattern -->
            <div class="absolute inset-0 opacity-10">
              <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, rgba(252,192,97,0.3) 1px, transparent 0); background-size: 24px 24px;"></div>
            </div>
            
            <!-- Content -->
            <div class="relative z-10">
              <div class="grid grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 max-w-2xl mx-auto">
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_01.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 1">
                </div>
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_02.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 2">
                </div>
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_03.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 3">
                </div>
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_04.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 4">
                </div>
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_05.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 5">
                </div>
                <div class="aspect-square rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 hover:scale-105 group">
                  <img src="https://ddbobialzdjkzainyqgb.supabase.co/storage/v1/object/public/nft//ani_06.gif" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" alt="AnimateDiff Sample 6">
                </div>
              </div>
              
              <div class="text-center mt-6">
                <p class="text-xs lg:text-sm text-gray-500 font-inter">
                  Source: <a href="https://animatediff.github.io/" target="_blank" rel="noopener noreferrer" class="text-banodoco-purple hover:text-banodoco-accent transition-colors duration-200 underline">AnimateDiff project page</a>
                </p>
              </div>
            </div>
          </div>
          
          <!-- Spacer to ensure sufficient gap before next paragraph -->
          <div class="h-3 lg:h-4"></div>

          <p class="enhanced-paragraph fade-in-up stagger-3">
            Despite this, it achieved significant popularity and was used to create art that made its way to stages, screens and productions all over the world.
          </p>

          <p class="enhanced-paragraph fade-in-up stagger-3">
            This is thanks to it being <span class="key-phrase" data-hover-box data-hover-type="info-box" data-hover-image="assets/16-frames/huggingface.png">released openly</span> &mdash; which meant that thousands of developers could work together informally to extend its capabilities.
          </p>

          <p class="enhanced-paragraph fade-in-up stagger-3">
            Due to this, most of the control techniques now popular in AI video &mdash; <span class="key-phrase" data-hover-box data-hover-type="info-box" data-hover-image="assets/16-frames/travel_between_images.gif" data-overlay-text="Example by Matt30">using anchor images</span>, <span class="key-phrase" data-hover-box data-hover-type="info-box" data-hover-image="assets/16-frames/prompt_travel.gif" data-overlay-text="Example by CitizenPlain">prompt travel</span>, <span class="key-phrase" data-hover-box data-hover-type="info-box" data-hover-image="assets/16-frames/controlnet.gif" data-overlay-text="Example by Kijai">video2video with structural control</span> &mdash; were pioneered and/or refined by people in the AnimateDiff ecosystem.
          </p>
          
          <p class="enhanced-paragraph fade-in-up stagger-4">
            I would like to tell the story of this collected effort by explaining the advances and innovations that fueled it, and showing the art that was created because of them. To do this, I'll create a <span class="key-phrase" data-hover-box data-hover-type="static-info-box" data-hover-html="Are you a dev/designer who wants to help me make this? <a href='mailto:peter@omalley.io'>Get in touch</a>.">visual explainer</span> using a mixture of 'inputs' like test generations and 'outputs' like completed artworks - each of which will be made into an NFT.
          </p>
          
          <p class="enhanced-paragraph fade-in-up stagger-6">
            My goal will be to help people understand the struggle that went into these developments, while getting recognition for our collective achievements at an important time in art history. Earnings will be shared with those who contribute generations or art, with Banodoco's proceeds split equally between <span class="key-phrase-red">funding an open source AI art competition</span> and <span class="key-phrase-green">providing compute for open research and training</span>.
          </p> 
          
          <p class="enhanced-paragraph fade-in-up stagger-8">
            If you're seeing this and were involved in the AnimateDiff ecosystem, I'd highly appreciate your participation. 
          </p>
          
          <div class="fade-in-up stagger-9 text-center mt-4 lg:mt-6">
            <div class="inline-block bg-gradient-to-r from-banodoco-accent/10 via-banodoco-purple/10 to-banodoco-accent/10 rounded-2xl p-4 border border-banodoco-accent/20">
              <p class="text-2xl lg:text-3xl font-inter font-medium text-gray-700 m-0">
                <span class="key-phrase cursor-pointer" data-hover-box data-hover-type="static-info-box" data-hover-html="Get in touch:<div class='contact-links'><a href='https://pom.voyage/' target='_blank' title='Website'><svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><circle cx='12' cy='12' r='10'></circle><path d='M2 12h20'></path><path d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'></path></svg></a><a href='mailto:peter@omalley.io' title='Email'><svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><path d='M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z'></path><polyline points='22,6 12,13 2,6'></polyline></svg></a><a href='https://x.com/peteromallet' target='_blank' title='X'><svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><path d='M4 4l11.733 16h4.267l-11.733 -16z'></path><path d='M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772'></path></svg></a></div>">POM</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Divider -->
    <hr class="section-divider border-none border-t-2 border-gray-300 border-opacity-20 mx-auto w-4/5 my-8" />



    <!-- Featured Pieces Section -->
    <section class="content-section mb-16 scroll-fade-in" id="featured-section">
      <h2 class="text-3xl font-space-grotesk font-semibold text-gray-800 mb-12 text-center">Featured work</h2>
      
      <!-- Collection Info -->
      <p class="text-center text-gray-500 font-inter mb-6 max-w-2xl mx-auto text-sm">
        We plan to include 50-100 inputs - test generations, masks, etc. - and 50-100 artworks in the final collection. Below are some of the featured pieces.
      </p>
      
      <!-- Input/Output Toggle -->
      <div class="flex justify-center mb-8">
        <div class="bg-white rounded-lg p-1 shadow-sm border border-gray-200">
          <button id="filter-all" class="px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 bg-banodoco-purple text-white">All</button>
          <button id="filter-input" class="px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-gray-600 hover:text-gray-800">Inputs</button>
          <button id="filter-output" class="px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-gray-600 hover:text-gray-800">Outputs</button>
        </div>
      </div>
      
      <div id="featured-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
        <!-- Loading state -->
        <div class="col-span-full text-center py-12">
          <div class="spinner mx-auto mb-4"></div>
          <p class="text-gray-600 font-inter">Loading featured pieces...</p>
        </div>
      </div>

      <div id="pagination-controls" class="flex justify-center items-center space-x-2 mt-8"></div>
    </section>

    <!-- Divider -->
    <hr class="section-divider border-none border-t-2 border-gray-300 border-opacity-20 mx-auto w-4/5 my-8" />

    <!-- Submission Section -->
    <section class="content-section mb-12 scroll-fade-in" id="submission-section">
      <h2 class="text-3xl font-space-grotesk font-semibold text-gray-800 mb-8 text-center">Submit your generations & art:</h2>
      
      <div class="flex flex-col lg:flex-row gap-12 lg:items-stretch">
        <!-- Form Column -->
        <div class="lg:w-2/5 lg:flex-shrink-0 order-2 lg:order-1 scroll-fade-in-left scroll-stagger-1">
          <form id="submission-form" class="bg-white bg-opacity-90 p-8 rounded-xl shadow-lg border border-banodoco-accent border-opacity-40" style="box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
            <!-- Name Input -->
            <div class="mb-6">
              <label for="name" class="block mb-2 font-medium text-gray-800 font-inter">Your Name:</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required
                class="w-full p-3 border-2 border-gray-300 rounded-lg text-base transition-colors duration-300 ease-in-out focus:border-banodoco-purple focus:outline-none font-inter"
              >
            </div>

            <!-- Revenue Split -->
            <div class="mb-6">
              <label for="split" class="flex items-center mb-3 font-medium text-gray-800 font-inter">
                Earnings split percentage:
                <div class="relative inline-flex items-center ml-2">
                  <span class="cursor-help font-inter font-bold text-banodoco-purple border border-banodoco-purple rounded-full w-5 h-5 inline-flex items-center justify-center text-xs info-icon" tabindex="0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 h-3.5"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                  </span>
                  <div class="tooltip-text w-64 bg-gray-800 text-white text-left rounded-md p-2.5 absolute z-10 bottom-full left-1/2 transform -translate-x-1/2 transition-opacity duration-300 ease-in-out shadow-md font-normal text-sm leading-5 opacity-0 invisible pointer-events-none">
                    After expenses including minting and listing fees. This figure will be included on the listing.
                  </div>
                </div>
              </label>
              <div class="flex items-center gap-4 mb-2">
                <input type="range" id="split" name="split" min="0" max="100" value="50" class="flex-1 h-1.5 bg-gray-300 rounded-full appearance-none cursor-pointer" oninput="updateSplitValues(this.value)">
              </div>
              <div class="flex justify-between text-sm text-gray-600 font-inter">
                <span>Banodoco: <span id="banodocoPercent" class="font-semibold">50%</span></span>
                <span>You: <span id="youPercent" class="font-semibold">50%</span></span>
              </div>
            </div>

            <!-- Description -->
            <div class="mb-6">
              <label for="description" class="block mb-2 font-medium text-gray-800 font-inter">Include any relevant description:</label>
              <textarea 
                id="description" 
                name="description" 
                class="w-11/12 min-h-[3rem] p-3 border-2 border-gray-300 rounded-lg text-base transition-colors duration-300 ease-in-out resize-y font-inter focus:border-banodoco-purple focus:outline-none"
                rows="2"
              ></textarea>
            </div>

            <!-- When Created -->
            <div class="mb-6">
              <label class="block mb-2 font-medium text-gray-800 font-inter">When did you create this?</label>
              <div class="flex gap-3">
                <div class="flex-1">
                  <label for="created-month" class="block mb-1 text-sm text-gray-600 font-inter">Month</label>
                  <select 
                    id="created-month" 
                    name="created-month" 
                    class="w-full p-3 border-2 border-gray-300 rounded-lg text-base transition-colors duration-300 ease-in-out focus:border-banodoco-purple focus:outline-none font-inter">
                    <option value="January">January</option>
                    <option value="February">February</option>
                    <option value="March">March</option>
                    <option value="April">April</option>
                    <option value="May" selected>May</option>
                    <option value="June">June</option>
                    <option value="July">July</option>
                    <option value="August">August</option>
                    <option value="September">September</option>
                    <option value="October">October</option>
                    <option value="November">November</option>
                    <option value="December">December</option>
                  </select>
                </div>
                <div class="flex-1">
                  <label for="created-year" class="block mb-1 text-sm text-gray-600 font-inter">Year</label>
                  <input 
                    type="number" 
                    id="created-year" 
                    name="created-year" 
                    value="2024"
                    min="2020" 
                    max="2030"
                    class="w-full p-3 border-2 border-gray-300 rounded-lg text-base transition-colors duration-300 ease-in-out focus:border-banodoco-purple focus:outline-none font-inter"
                  >
                </div>
              </div>
            </div>

            <!-- Permission Checkbox -->
            <div class="mb-6 mt-2">
              <label class="flex items-start cursor-pointer leading-5 font-inter">
                <input type="checkbox" id="permission" name="permission" class="mr-3 mt-1.5 transform scale-120">
                <span class="text-gray-800">I give permission to Banodoco, Inc. to use the attached generations in the 16 Frames collection</span>
              </label>
            </div>

            <!-- Submit Button -->
            <div class="relative inline-block w-full">
              <button type="submit" id="submit-generations-button" 
                class="block w-full py-3.5 bg-gradient-to-r from-banodoco-accent via-red-400 to-purple-600 text-white border-none rounded-lg text-lg font-semibold cursor-pointer transition-all duration-300 ease-in-out disabled:bg-none disabled:bg-gray-400 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none hover:enabled:transform hover:enabled:scale-105 hover:enabled:shadow-lg" 
                disabled>
                Submit Generations
              </button>
              <div class="button-tooltip-text w-[15.5rem] bg-gray-800 text-white text-center rounded-md p-2 absolute z-10 bottom-full left-1/2 transform -translate-x-1/2 opacity-0 invisible transition-opacity duration-300 ease-in-out shadow-md text-xs pointer-events-none" id="button-tooltip">
                You need to have uploaded to submit
            </div>
            </div>
            
            <p class="mt-4 text-center italic font-inter form-upload-note">Note: you can upload multiple batches. We will choose the most suitable items to include.</p>
            
            <!-- Progress Container -->
            <div id="upload-progress-container" class="mt-6 hidden">
              <div class="bg-banodoco-purple bg-opacity-5 rounded-lg p-6 border border-banodoco-purple border-opacity-20">
                <div class="flex items-center mb-4">
                  <div class="spinner mr-3" id="main-spinner"></div>
                  <h3 id="progress-title" class="m-0 text-banodoco-purple text-lg">Preparing upload...</h3>
                </div>
                
                <div id="overall-progress-bar" class="w-full h-2 bg-gray-300 rounded overflow-hidden mb-4">
                  <div id="overall-progress-fill" class="h-full bg-gradient-to-r from-banodoco-accent to-red-400 w-0 transition-all duration-300 ease-in-out rounded"></div>
                </div>
                
                <div id="file-progress-list" class="max-h-[12.5rem] overflow-y-auto"></div>
                
                <div id="progress-summary" class="text-center mt-4 text-sm text-gray-600"></div>
              </div>
            </div>
            
            <div id="submission-status" class="mt-4 text-center text-sm"></div>
          </form>
        </div>
        
        <!-- Dropzone Column -->
        <div id="dropzone" 
          class="dropzone-container group flex items-center justify-center border-2 border-dashed border-banodoco-accent min-h-80 rounded-2xl p-8 bg-gradient-to-br from-banodoco-accent/5 via-banodoco-accent/10 to-purple-500/5 transition-all duration-500 ease-out cursor-pointer relative overflow-hidden lg:flex-1 order-1 lg:order-2 scroll-fade-in-right scroll-stagger-1">
          
          <!-- Background pattern -->
          <div class="absolute inset-0 opacity-20 transition-opacity duration-500 ease-out">
            <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(252,192,97,0.15) 1px, transparent 0); background-size: 20px 20px;"></div>
          </div>
          
          <!-- Animated border glow -->
          <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-banodoco-accent via-purple-500 to-banodoco-accent opacity-0 transition-opacity duration-500 ease-out blur-sm"></div>
          
          <input type="file" id="file-input" multiple accept="*/*" class="hidden">
          
          <div class="text-center pointer-events-auto relative z-10 transition-transform duration-500 ease-out">
            <!-- Icon container with animation -->
            <div class="relative mb-6 transition-transform duration-500 ease-out">
              <div class="w-20 h-20 mx-auto bg-gradient-to-br from-banodoco-accent to-yellow-600 rounded-2xl flex items-center justify-center shadow-lg transition-all duration-500 ease-out">
                <svg class="w-10 h-10 text-white transition-transform duration-500 ease-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
        </div>
              
              <!-- Floating particles -->
              <div class="absolute -top-2 -right-2 w-3 h-3 bg-yellow-400 rounded-full opacity-0 transition-all duration-700 ease-out"></div>
              <div class="absolute -bottom-1 -left-2 w-2 h-2 bg-purple-400 rounded-full opacity-0 transition-all duration-700 ease-out"></div>
              <div class="absolute top-1 -left-3 w-1.5 h-1.5 bg-banodoco-accent rounded-full opacity-0 transition-all duration-700 ease-out"></div>
            </div>
            
            <div class="space-y-3 transition-all duration-500 ease-out">
              <h3 class="text-xl font-space-grotesk font-semibold text-gray-800 transition-colors duration-500 ease-out">
                Drop your files here
              </h3>
              <p class="text-base text-yellow-700 font-medium transition-colors duration-500 ease-out">
                or click to browse and upload
              </p>
              <p class="text-sm text-gray-500 font-inter transition-colors duration-500 ease-out" id="dropzone-helper-text">
                
              </p>
              
              <!-- File format hints -->
              <div class="flex flex-wrap justify-center gap-2 mt-4 opacity-60 transition-all duration-500 ease-out">
                <span class="px-2 py-1 text-xs bg-white/60 rounded-full text-gray-600 transition-all duration-300 ease-out">.mp4</span>
                <span class="px-2 py-1 text-xs bg-white/60 rounded-full text-gray-600 transition-all duration-300 ease-out">.gif</span>
                <span class="px-2 py-1 text-xs bg-white/60 rounded-full text-gray-600 transition-all duration-300 ease-out">.png</span>
                <span class="px-2 py-1 text-xs bg-white/60 rounded-full text-gray-600 transition-all duration-300 ease-out">.jpg</span>
                <span class="px-2 py-1 text-xs bg-white/60 rounded-full text-gray-600 transition-all duration-300 ease-out">+more</span>
      </div>
    </div>

            <div id="file-list" class="mt-6 text-sm text-gray-800 text-left"></div>
          </div>
          
          <!-- Active drag overlay -->
          <div id="drag-overlay" class="absolute inset-0 bg-gradient-to-br from-banodoco-accent/20 to-purple-500/20 rounded-2xl border-2 border-banodoco-accent/60 flex items-center justify-center opacity-0 pointer-events-none transition-all duration-200 backdrop-blur-sm">
            <div class="text-center">
              <div class="w-16 h-16 mx-auto bg-banodoco-accent rounded-2xl flex items-center justify-center shadow-lg mb-4 scale-110">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
              </div>
              <h3 class="text-lg font-space-grotesk font-semibold text-gray-800">Release to upload</h3>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Divider -->
    <hr class="section-divider border-none border-t-2 border-gray-300 border-opacity-20 mx-auto w-4/5 my-8" />

    <!-- Q&A Section -->
    <section class="content-section mb-16 scroll-fade-in" id="qa-section">
      <h2 class="text-3xl font-space-grotesk font-semibold text-gray-800 mb-8 text-center">Questions & answers</h2>
      
      <div class="max-w-4xl mx-auto space-y-4">
        <!-- Question 1 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-1">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">What type of submissions are you looking for?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed">
              <ul class="list-disc list-inside space-y-2">
                <li><strong>Input Materials:</strong> things that give a feeling of the artistic or technical process as people created and built things - test generations, masks, fails, etc.</li>
                <li><strong>Refined, High-Effort Art:</strong> created at various stages of the AnimateDiff's development lifecycle.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Question 2 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-2">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">Do I need to have been active in the Banodoco community?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed">
              <p>No, we highly appreciate submissions from anyone who created art or technology for AnimateDiff.</p>
            </div>
          </div>
        </div>

        <!-- Question 3 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-3">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">How does the revenue sharing work?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed space-y-4">
              <p>Contributors can set their own revenue split percentage when submitting content.</p>
              <p>This percentage applies to net proceeds after expenses like minting, listing fees, and platform costs.</p>
              <p>The split you choose will be transparently displayed on the NFT listing, ensuring fair compensation.</p>
            </div>
          </div>
        </div>

        <!-- Question 4 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-4">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">How will the Banodoco portion be spent?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed space-y-4">
                <p>After expenses and tax, 50% of Banodoco's portion will go towards a prize fund for an art competition, while 50% will fund compute for researchers and trainers in the community.</p>
                <p>All expenditure of these funds will be public for anyone to view. All sales data from which this revenue is derived will be public on the blockchain also.</p>
            </div>
          </div>
        </div>

        <!-- Question 5 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-5">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">How will the final NFTs be selected and curated?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed">
              <p>POM will choose items that he feels both suit the story well, and represent the ecosystem's collected progress well.</p>
            </div>
          </div>
        </div>

        <!-- Question 6 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-6">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">Which blockchain will you use? Will you be listing with a partner or L2?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed">
                <p>This is TBC. We have a few options but are very open to ideas and offers.</p>
            </div>
          </div>
        </div>


        <!-- Question 8 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-8">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">How can I help?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed space-y-4">
                <p>Firstly, any submissions or sharing with people who might submit is hugely appreciated!</p>
                <p>Secondly, if you're a web designer and developer who would like to help me build a really nice web experience for the story, I would hugely appreciate the help.</p>
            </div>
          </div>
        </div>


        <!-- Question 7 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-7">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">Why might someone buy one? Why might they become valuable with time?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed space-y-4">
                <p>There's a craving for realness in the crypto world - for projects and people who aren't doing things for the sake of money. This is a large part of why Beeple's work was valuable - his years of effort with no reward was undeniable evidence that he was 'real'.</p>
                <p>I believe that our ecosystem is also very 'real'; it involves hundreds of people working for free over a long period of time, creating art for no incentive, and pioneering technology and artistic approaches, often years before closed source companies catch up.</p>
                <p>Given the artistic approaches pioneered with AnimateDiff, its prominence as an early AI video model and the utopian nature of this community, I believe that it in particular will have significance from an art history perspective.</p>
                <p>I believe that - if we communicate this well - people in the crypto world will understand the significance of this, and as people understand the importance of open models and innovation for artistic expression that significance will grow with time.</p>
            </div>
          </div>
        </div>
        <!-- Question 9 -->
        <div class="qa-item bg-white bg-opacity-90 rounded-lg shadow-sm border border-gray-200 overflow-hidden scroll-fade-in scroll-stagger-9">
          <button class="qa-question w-full text-left py-4 px-6 hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:bg-gray-50" onclick="toggleQA(this)">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-medium font-space-grotesk text-gray-800 pr-4">How can I get in touch?</h3>
              <svg class="qa-icon w-6 h-6 text-gray-500 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          <div class="qa-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-4 pt-4 text-gray-700 font-inter leading-relaxed">
              <p>Message POM on <a href="https://discord.gg/KprdCw48" target="_blank" rel="noopener noreferrer" class="text-banodoco-purple hover:text-banodoco-accent transition-colors duration-200">Discord</a> or <a href="mailto:peter@omalley.io" class="text-banodoco-purple hover:text-banodoco-accent transition-colors duration-200">email him</a>.</p>
            </div>
          </div>
        </div>


    </section>

    <!-- Footer -->
    <div id="footer"></div>
    <script>
      fetch('src/components/footer.html')
        .then(response => response.text())
        .then(html => {
          const footerElement = document.getElementById('footer');
          footerElement.innerHTML = html;
          if (window.feather) {
            feather.replace();
          }
          import('./src/js/components/plant-init.js')
            .then(mod => {
              if (typeof mod.initializePlantAnimation === 'function') {
                mod.initializePlantAnimation();
              }
            })
            .catch(err => console.error('Could not load plant-init.js:', err));
        })
        .catch(err => console.error('Error loading footer.html:', err));
    </script>
  </div>

  <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center z-[9999] hidden opacity-0 invisible p-8">
    <button id="lightbox-close" class="absolute top-4 right-6 text-white text-5xl font-light z-[10000] cursor-pointer hover:text-gray-300 transition-colors">&times;</button>
    <div id="lightbox-content" class="relative">
      <!-- Media will be injected here -->
    </div>
  </div>

  <!-- Key-phrase Hover Box -->
  <div id="key-phrase-hover-box">
    <!-- Images will be injected here by JS -->
  </div>

  <script src="src/js/components/icons.js"></script>
  <script src="src/js/components/plant-animation.js" type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    const SUPABASE_URL = 'https://ddbobialzdjkzainyqgb.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkYm9iaWFsemRqa3phaW55cWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY2MzQ0MTgsImV4cCI6MjA2MjIxMDQxOH0.CAstIrTFMcIAIDht0ZacLYY-obBptH3XXShohSzbwjU';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    let selectedFiles = [];

    // Lightbox global variables
    let hideLightboxTimeout;
    let lightbox, lightboxContent;
    let allFeaturedPieces = [];
    let currentPage = 1;
    const itemsPerPage = 6;
    let currentFilter = 'all'; // Track current filter state

    // Hover-box global variables
    let hoverBox;
    let currentHoverElement = null;
    let isStaticHover = false;
    let hoverBoxClearTimeout; // manages delayed clearing of hover box content

    // Mobile support: keep references to listeners that close the hover-box on outside tap / scroll
    let touchOutsideListener, touchScrollListener;

    // Detect if this is a touch device (no hover capability)
    const isTouchDevice = ("ontouchstart" in window) || navigator.maxTouchPoints > 0;

    // Tooltip functionality
    document.addEventListener('DOMContentLoaded', function() {
      lightbox = document.getElementById('lightbox');
      lightboxContent = document.getElementById('lightbox-content');

      const infoIcon = document.querySelector('.info-icon');
      const tooltip = document.querySelector('.tooltip-text');
      const buttonTooltip = document.querySelector('.button-tooltip-text');
      
      infoIcon.addEventListener('mouseenter', () => {
        tooltip.classList.remove('opacity-0', 'invisible');
        tooltip.classList.add('opacity-100', 'visible');
      });
      
      infoIcon.addEventListener('mouseleave', () => {
        tooltip.classList.add('opacity-0', 'invisible');
        tooltip.classList.remove('opacity-100', 'visible');
      });

      // Button tooltip
      const submitButton = document.getElementById('submit-generations-button');
      submitButton.addEventListener('mouseenter', () => {
        if (submitButton.disabled) {
          buttonTooltip.classList.remove('opacity-0', 'invisible');
          buttonTooltip.classList.add('opacity-100', 'visible');
        }
      });
      
      submitButton.addEventListener('mouseleave', () => {
        buttonTooltip.classList.add('opacity-0', 'invisible');
        buttonTooltip.classList.remove('opacity-100', 'visible');
      });

      // Lightbox listeners
      document.getElementById('lightbox-close').addEventListener('click', () => hideLightbox(true));

      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            hideLightbox(true); // Force hide immediately on backdrop click
        }
      });

      // Filter toggle functionality
      const filterButtons = {
        all: document.getElementById('filter-all'),
        input: document.getElementById('filter-input'),
        output: document.getElementById('filter-output')
      };

      Object.entries(filterButtons).forEach(([filterType, button]) => {
        if (button) {
          button.addEventListener('click', () => {
            // Update active button styling
            Object.values(filterButtons).forEach(btn => {
              if (btn) {
                btn.classList.remove('bg-banodoco-purple', 'text-white');
                btn.classList.add('text-gray-600', 'hover:text-gray-800');
              }
            });
            button.classList.add('bg-banodoco-purple', 'text-white');
            button.classList.remove('text-gray-600', 'hover:text-gray-800');

            // Update filter and refresh display
            currentFilter = filterType;
            currentPage = 1; // Reset to first page
            displayPage(1);
          });
        }
      });

      // Initialize Hover Box
      initializeHoverBox();
    });

    function showLightbox(url, mediaType) {
        lightboxContent.innerHTML = '';

        let mediaElement;
        if (mediaType === 'video') {
            mediaElement = document.createElement('video');
            mediaElement.src = url;
            mediaElement.autoplay = true;
            mediaElement.loop = true;
            mediaElement.muted = false; // Unmute in lightbox
            mediaElement.controls = true;
            mediaElement.volume = 0.5; // Set default volume to 50%
            mediaElement.className = 'max-w-[70vw] max-h-[70vh] rounded-lg';
        } else if (mediaType === 'image') {
            mediaElement = document.createElement('img');
            mediaElement.src = url;
            mediaElement.className = 'max-w-[70vw] max-h-[70vh] rounded-lg';
        } else {
            return; // Don't show lightbox for other file types
        }

        lightboxContent.appendChild(mediaElement);
        lightbox.classList.remove('hidden');
        setTimeout(() => lightbox.classList.remove('opacity-0', 'invisible'), 10); // Start transition
    }

    function hideLightbox(force = false) {
        const delay = force ? 0 : 200;
        setTimeout(() => {
            lightbox.classList.add('opacity-0', 'invisible');
            // Wait for transition to finish before hiding and clearing content
            setTimeout(() => {
                lightbox.classList.add('hidden');
                lightboxContent.innerHTML = '';
            }, 300);
        }, delay);
    }

    function updateSplitValues(valueString) {
      const value = parseInt(valueString, 10);
      const banodocoPercent = 100 - value;
      const youPercent = value;
      
      document.getElementById('banodocoPercent').textContent = banodocoPercent + '%';
      document.getElementById('youPercent').textContent = youPercent + '%';

      if (value === 0 || value === 100) {
        createFloatingEmoji(value); 

        setTimeout(() => {
          if (value === 100) {
            createFloatingEmoji(value, '🤨', '1rem', 5);
          } else {
            createFloatingEmoji(value, '😏', '1rem', 5);
          }
        }, 100);
      }
    }

    function createFloatingEmoji(numericValue, emojiChar = '😮', fontSize = '2rem', durationSeconds = 3) {
      const slider = document.getElementById('split');
      const sliderRect = slider.getBoundingClientRect();
      
      const emoji = document.createElement('div');
      emoji.textContent = emojiChar;
      emoji.className = 'floating-emoji';
      emoji.style.fontSize = fontSize;
      emoji.style.position = 'absolute';
      emoji.style.pointerEvents = 'none';

      if (durationSeconds === 5) {
        emoji.style.animation = 'floatUpQuickly 5s ease-out forwards';
        emoji.style.zIndex = '999';
      } else {
        emoji.style.animation = 'floatUp 3s ease-out forwards';
        emoji.style.zIndex = '1000';
      }
      
      // Calculate thumb position within the slider
      const thumbPosition = (numericValue / 100) * sliderRect.width;
      
      // Calculate emoji starting position - properly convert viewport to document coordinates
      const emojiWidth = parseFloat(fontSize) * 16;
      
      // Get current scroll position (use more reliable method)
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
      const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
      
      // Get the slider's position in the document
      const sliderDocumentLeft = sliderRect.left + scrollLeft;
      const sliderDocumentTop = sliderRect.top + scrollTop;
      
      // Calculate final position
      const finalLeft = sliderDocumentLeft + thumbPosition - (emojiWidth / 2);
      const finalTop = sliderDocumentTop - 40;
      
      // Debug logging
      console.log('Slider rect:', sliderRect);
      console.log('Scroll positions:', { scrollTop, scrollLeft });
      console.log('Final positions:', { finalLeft, finalTop });
      
      // Set position
      emoji.style.left = finalLeft + 'px';
      emoji.style.top = finalTop + 'px';
      
      document.body.appendChild(emoji);
      
      setTimeout(() => {
        if (emoji.parentNode) {
          emoji.parentNode.removeChild(emoji);
        }
      }, durationSeconds * 1000);
    }

    // Form and file handling logic
    const submissionForm = document.getElementById('submission-form');
    const fileInput = document.getElementById('file-input');
    const dropzone = document.getElementById('dropzone');
    const fileListDisplay = document.getElementById('file-list');
    const submissionStatus = document.getElementById('submission-status');
    const nameInput = document.getElementById('name');
    const permissionCheckbox = document.getElementById('permission');
    const splitSlider = document.getElementById('split');
    const dropzoneHelperText = document.getElementById('dropzone-helper-text');
    const submitButton = document.getElementById('submit-generations-button');

    dropzone.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', (event) => {
        handleFiles(event.target.files);
    });

    dropzone.addEventListener('dragover', (event) => {
        event.preventDefault();
        const dragOverlay = document.getElementById('drag-overlay');
        if (!dropzone.classList.contains('dragging')) {
          dropzone.classList.add('dragging');
          dragOverlay.style.opacity = '1';
        }
    });

    dropzone.addEventListener('dragleave', (event) => {
        // Only trigger if we're leaving the dropzone entirely
        if (!dropzone.contains(event.relatedTarget)) {
            const dragOverlay = document.getElementById('drag-overlay');
            dropzone.classList.remove('dragging');
            dragOverlay.style.opacity = '0';
        }
    });

    dropzone.addEventListener('drop', (event) => {
        event.preventDefault();
        const dragOverlay = document.getElementById('drag-overlay');
        dropzone.classList.remove('dragging');
        dragOverlay.style.opacity = '0';
        handleFiles(event.dataTransfer.files);
    });

    function handleFiles(files) {
        if (!files) return;
        const newFiles = Array.from(files);
        const combinedFiles = [...selectedFiles, ...newFiles].reduce((acc, current) => {
            if (!acc.find(item => item.name === current.name && item.size === current.size)) {
                acc.push(current);
            }
            return acc;
        }, []);
        selectedFiles = combinedFiles;
        updateFileDisplay();
    }

    function updateFileDisplay() {
        fileListDisplay.innerHTML = '';
        if (selectedFiles.length > 0) {
            const list = document.createElement('ul');
            list.className = 'list-none p-0';
            selectedFiles.forEach((file, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'flex justify-between items-center mb-2 py-1';
                
                const fileInfo = document.createElement('span');
                fileInfo.textContent = file.name + ' (' + (file.size / 1024).toFixed(2) + ' KB)';
                
                const removeButton = document.createElement('button');
                removeButton.textContent = '×';
                removeButton.className = 'bg-none border-none text-gray-500 text-xl cursor-pointer px-2 ml-2 rounded transition-colors duration-200 hover:text-gray-700';
                removeButton.onclick = (event) => {
                    event.stopPropagation();
                    removeFile(index);
                };
                
                listItem.appendChild(fileInfo);
                listItem.appendChild(removeButton);
                list.appendChild(listItem);
            });
            fileListDisplay.appendChild(list);
        }
        
        if (selectedFiles.length >= 1) {
            submitButton.disabled = false;
            dropzoneHelperText.textContent = selectedFiles.length + ' file(s) selected.';
        } else {
            submitButton.disabled = true;
            dropzoneHelperText.textContent = '(Min 1 file)';
        }
    }

    function removeFile(index) {
        selectedFiles.splice(index, 1);
        updateFileDisplay();
    }

    submissionForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        
        const uploaderName = nameInput.value.trim();
        const permissionGiven = permissionCheckbox.checked;
        const percentageToThem = parseInt(splitSlider.value, 10);
        const description = document.getElementById('description').value.trim();
        const createdMonth = document.getElementById('created-month').value;
        const createdYear = document.getElementById('created-year').value;
        const createdDate = createdMonth && createdYear ? `${createdMonth} ${createdYear}` : null;

        if (!uploaderName) {
            showSimpleStatus('Please enter your name.', 'red');
            return;
        }

        if (!permissionGiven) {
            showSimpleStatus('Please grant permission to use the generations.', 'red');
            return;
        }

        if (selectedFiles.length < 1) {
            showSimpleStatus('Please select at least 1 file to upload.', 'red');
            return;
        }

        startProgressSystem();
        submitButton.disabled = true;

        try {
            const uploadedFileUrls = [];
            const uploadedFileNames = [];
            
            createFileProgressItems();
            
            for (let i = 0; i < selectedFiles.length; i++) {
                const file = selectedFiles[i];
                updateProgressTitle(`Uploading file ${i + 1} of ${selectedFiles.length}...`);
                updateOverallProgress((i / selectedFiles.length) * 80);
                
                try {
                    await uploadFileWithProgress(file, i);
                    
                    const safeUploaderName = uploaderName.replace(/\s+/g, '-').replace(/[^a-zA-Z0-9-]/g, '');
                    
                    function generateUUID() {
                        if (typeof crypto !== 'undefined' && crypto.randomUUID) {
                            try {
                                return crypto.randomUUID();
                            } catch (e) {}
                        }
                        
                        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                            const r = Math.random() * 16 | 0;
                            const v = c == 'x' ? r : (r & 0x3 | 0x8);
                            return v.toString(16);
                        });
                    }
                    
                    const fileName = `public/${safeUploaderName || 'anon'}/${generateUUID()}-${file.name}`;
                    
                    const { data, error } = await supabase.storage
                        .from('nft')
                        .upload(fileName, file, {
                            cacheControl: '3600',
                            upsert: false
                        });

                    if (error) {
                        throw new Error(`Upload failed: ${error.message}`);
                    }

                    const { data: publicURLData } = supabase.storage.from('nft').getPublicUrl(data.path);
                    uploadedFileUrls.push(publicURLData.publicUrl);
                    uploadedFileNames.push(file.name);
                    
                    updateFileStatus(i, 'completed', 'Uploaded ✓');
                    
                } catch (error) {
                    updateFileStatus(i, 'error', 'Failed ✗');
                    throw error;
                }
            }

            updateProgressTitle('Saving submission details...');
            updateOverallProgress(90);
            updateProgressSummary('Finalizing submission...');

            const { error: dbError } = await supabase
                .from('nft')
                .insert({
                    uploader_name: uploaderName,
                    file_names: uploadedFileNames,
                    percentage_to_them: percentageToThem,
                    urls: uploadedFileUrls,
                    description: description || null,
                    Created: createdDate || null
                });

            if (dbError) {
                throw new Error(`Database save failed: ${dbError.message}`);
            }

            updateProgressTitle('Upload Complete! 🎉');
            updateOverallProgress(100);
            updateProgressSummary(`Successfully uploaded ${selectedFiles.length} file(s)`);
            hideSpinner();
            
            setTimeout(() => {
                hideProgressSystem();
                showSimpleStatus('Submission successful! Thank you.', 'green');
                resetForm();
            }, 2000);

        } catch (error) {
            console.error('Submission error:', error);
            updateProgressTitle('Upload Failed');
            hideSpinner();
            updateProgressSummary(`Error: ${error.message}`);
            
            setTimeout(() => {
                hideProgressSystem();
                showSimpleStatus(`Error: ${error.message}`, 'red');
                submitButton.disabled = selectedFiles.length < 1;
            }, 3000);
        }
    });

    // Progress system helper functions
    function startProgressSystem() {
        document.getElementById('upload-progress-container').classList.remove('hidden');
        document.getElementById('submission-status').textContent = '';
        updateProgressTitle('Preparing upload...');
        updateOverallProgress(0);
        updateProgressSummary('');
    }

    function hideProgressSystem() {
        document.getElementById('upload-progress-container').classList.add('hidden');
    }

    function updateProgressTitle(title) {
        document.getElementById('progress-title').textContent = title;
    }

    function updateOverallProgress(percentage) {
        document.getElementById('overall-progress-fill').style.width = percentage + '%';
    }

    function updateProgressSummary(text) {
        document.getElementById('progress-summary').textContent = text;
    }

    function hideSpinner() {
        document.getElementById('main-spinner').style.display = 'none';
    }

    function createFileProgressItems() {
        const container = document.getElementById('file-progress-list');
        container.innerHTML = '';
        
        selectedFiles.forEach((file, index) => {
            const item = document.createElement('div');
            item.className = 'flex items-center justify-between p-3 mb-2 bg-white bg-opacity-70 rounded-md border-l-4 border-gray-300 transition-all duration-300 ease-in-out';
            item.id = `file-progress-${index}`;
            
            item.innerHTML = `
                <div class="flex-1 mr-4">
                    <div class="font-medium text-gray-800 text-sm mb-1">${file.name}</div>
                    <div class="text-xs text-gray-600">${(file.size / 1024).toFixed(2)} KB</div>
                    <div class="w-full h-1 bg-gray-300 rounded mt-2 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-banodoco-accent to-red-400 w-0 transition-all duration-300 ease-in-out rounded animate-pulse" id="file-progress-fill-${index}"></div>
                    </div>
                </div>
                <div class="flex items-center text-sm min-w-[6.25rem] justify-end" id="file-status-${index}">
                    <span>Waiting...</span>
                </div>
            `;
            
            container.appendChild(item);
        });
    }

    async function uploadFileWithProgress(file, index) {
        const item = document.getElementById(`file-progress-${index}`);
        const statusElement = document.getElementById(`file-status-${index}`);
        const progressFill = document.getElementById(`file-progress-fill-${index}`);
        
        item.classList.add('border-banodoco-accent', 'bg-banodoco-accent', 'bg-opacity-10');
        item.classList.remove('border-gray-300');
        statusElement.innerHTML = '<div class="mini-spinner"></div><span>Uploading...</span>';
        
        let progress = 0;
        const progressInterval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 95) progress = 95;
            progressFill.style.width = progress + '%';
        }, 200);
        
        await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1200));
        
        clearInterval(progressInterval);
        progressFill.style.width = '100%';
    }

    function updateFileStatus(index, status, text) {
        const item = document.getElementById(`file-progress-${index}`);
        const statusElement = document.getElementById(`file-status-${index}`);
        
        item.classList.remove('border-banodoco-accent', 'bg-banodoco-accent', 'bg-opacity-10', 'border-gray-300');
        
        if (status === 'completed') {
            item.classList.add('border-green-500', 'bg-green-500', 'bg-opacity-10');
        } else if (status === 'error') {
            item.classList.add('border-red-500', 'bg-red-500', 'bg-opacity-10');
        }
        
        let icon = '';
        if (status === 'completed') icon = '✓';
        else if (status === 'error') icon = '✗';
        
        statusElement.innerHTML = `<span>${text}</span><span class="ml-2 text-base">${icon}</span>`;
    }

    function showSimpleStatus(message, color) {
        const statusElement = document.getElementById('submission-status');
        statusElement.textContent = message;
        
        if (message.includes('Submission successful')) {
            statusElement.className = 'mt-4 text-center text-sm bg-green-500 text-white p-4 rounded-lg border-2 border-green-600 font-medium shadow-lg';
        } else {
            statusElement.className = `mt-4 text-center text-sm text-${color}-600`;
        }
    }

    function resetForm() {
        submissionForm.reset();
        selectedFiles = [];
        fileListDisplay.innerHTML = '';
        dropzoneHelperText.textContent = '(Min 1 file)';
        document.getElementById('banodocoPercent').textContent = '50%';
        document.getElementById('youPercent').textContent = '50%';
        document.getElementById('description').value = '';
        document.getElementById('created-month').value = 'May';
        document.getElementById('created-year').value = '2024';
        submitButton.disabled = true;
    }

    // Q&A Toggle Function
    function toggleQA(button) {
      const qaItem = button.closest('.qa-item');
      const answer = qaItem.querySelector('.qa-answer');
      const icon = button.querySelector('.qa-icon');
      const isOpen = answer.style.maxHeight && answer.style.maxHeight !== '0px';

      if (isOpen) {
        // Close the answer
        answer.style.maxHeight = '0px';
        icon.style.transform = 'rotate(0deg)';
        button.setAttribute('aria-expanded', 'false');
      } else {
        // Open the answer
        answer.style.maxHeight = answer.scrollHeight + 'px';
        icon.style.transform = 'rotate(180deg)';
        button.setAttribute('aria-expanded', 'true');
      }
    }

    // Load and display featured pieces from Supabase
    async function loadFeaturedPieces() {
      try {
        const { data, error } = await supabase
          .from('nft')
          .select('*')
          .eq('Status', 'Approved')
          .order('created_at', { ascending: false });

        if (error) {
          throw error;
        }

        allFeaturedPieces = [];
        if (data) {
          data.forEach(entry => {
            const urls = Array.isArray(entry.urls) ? entry.urls : [];
            urls.forEach(url => {
                allFeaturedPieces.push({ ...entry, singleUrl: url });
            });
          });
        }
        
        displayPage(1);

      } catch (error) {
        console.error('Error loading featured pieces:', error);
        const featuredGrid = document.getElementById('featured-grid');
        featuredGrid.innerHTML = `
          <div class="col-span-full text-center py-12">
            <p class="text-red-600 font-inter">Error loading featured pieces. Please try again later.</p>
          </div>
        `;
      }
    }

    function displayPage(page) {
      currentPage = page;
      const featuredGrid = document.getElementById('featured-grid');
      featuredGrid.innerHTML = '';

      if (!allFeaturedPieces || allFeaturedPieces.length === 0) {
        featuredGrid.innerHTML = `
          <div class="col-span-full text-center py-12">
            <p class="text-gray-600 font-inter">No approved pieces yet. Be the first to contribute!</p>
          </div>
        `;
        renderPagination();
        return;
      }
      
      // Apply filter
      let filteredPieces = allFeaturedPieces;
      if (currentFilter === 'input') {
        filteredPieces = allFeaturedPieces.filter(item => (item.Type || 'Input') === 'Input');
      } else if (currentFilter === 'output') {
        filteredPieces = allFeaturedPieces.filter(item => (item.Type || 'Input') === 'Output');
      }
      
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const pageItems = filteredPieces.slice(startIndex, endIndex);

      if (pageItems.length === 0 && filteredPieces.length > 0) {
           featuredGrid.innerHTML = `
              <div class="col-span-full text-center py-12">
                  <p class="text-gray-600 font-inter">No items on this page.</p>
              </div>
          `;
          renderPagination(filteredPieces);
          return;
      }

      if (filteredPieces.length === 0) {
        featuredGrid.innerHTML = `
          <div class="col-span-full text-center py-12">
            <p class="text-gray-600 font-inter">No ${currentFilter} items found.</p>
          </div>
        `;
        renderPagination(filteredPieces);
        return;
      }

      pageItems.forEach(entry => {
        const url = entry.singleUrl;
        const fileName = getFileNameFromUrl(url);
        const fileExtension = getFileExtension(fileName);
        const mediaType = getMediaType(fileExtension);
        const isMobile = window.innerWidth <= 1024;
        
        const avatarInitials = entry.uploader_name ? 
          entry.uploader_name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2) : 
          'AN';

        const avatarColor = getAvatarColor(entry.uploader_name || 'Anonymous');

        const card = document.createElement('div');
        card.className = 'group relative aspect-square bg-gray-900 rounded-lg overflow-visible shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer featured-item';
        
        // Create video element with appropriate mobile handling
        let videoHtml = '';
        if (mediaType === 'video') {
          if (isMobile) {
            videoHtml = `<video class="w-full h-full object-cover featured-video-mobile" muted loop preload="auto" playsinline>
                          <source src="${url}" type="video/mp4">
                        </video>`;
          } else {
            videoHtml = `<video class="w-full h-full object-cover" muted loop>
                          <source src="${url}" type="video/mp4">
                        </video>`;
          }
        }
        
        card.innerHTML = `
          <div class="absolute inset-0 overflow-hidden rounded-lg">
            ${mediaType === 'video' ? 
              videoHtml :
              mediaType === 'image' ? 
              `<img src="${url}" alt="${fileName}" class="w-full h-full object-cover">` :
              `<div class="w-full h-full bg-gradient-to-br from-gray-800 via-gray-700 to-gray-900 flex items-center justify-center">
                 <div class="text-center">
                   <div class="w-16 h-16 mx-auto bg-gray-600 rounded-lg flex items-center justify-center mb-4">
                     <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                     </svg>
                   </div>
                   <p class="text-white text-sm">${fileExtension.toUpperCase()}</p>
                 </div>
               </div>`
            }
          </div>

          <!-- Top Left Avatar -->
          <div class="absolute top-3 left-3 flex items-center gap-3 z-30">
            ${entry.Avatar ?
              `<img src="${entry.Avatar}" alt="${entry.uploader_name || 'anonymous'} avatar" class="w-8 h-8 rounded-full object-cover shadow-md border border-white/30">` :
              `<div class="w-8 h-8 bg-gradient-to-br ${avatarColor} rounded-full flex items-center justify-center shadow-md border border-white/30">
                <span class="text-white font-semibold text-xs">${avatarInitials}</span>
              </div>`
            }
            <div class="glass-overlay text-white px-2 py-1 rounded text-xs font-medium">
              ${entry.uploader_name || 'Anonymous'}
            </div>
          </div>

          <!-- Top Right Type -->
          <div class="absolute top-3 right-3 z-30">
            <div class="px-2 py-0.5 rounded text-xs font-normal bg-white bg-opacity-20 text-white border border-white border-opacity-30">
              ${entry.Type || 'Input'}
            </div>
          </div>

          <!-- Bottom Left Description -->
          ${entry.description ? `
            <div class="absolute bottom-3 left-3 max-w-[50%] z-30">
              <div class="bg-black bg-opacity-30 text-white text-xs rounded px-2 py-1 leading-snug font-light">
                <p style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-size: 10px; line-height: 1.3;">${entry.description}</p>
              </div>
            </div>
          ` : ''}

          <!-- Bottom Right Creation Date -->
          ${entry.Created ? `
            <div class="absolute bottom-3 right-3 z-30">
              <div class="bg-white bg-opacity-90 text-gray-800 text-xs rounded-md px-2 py-1 font-medium shadow-sm border border-white border-opacity-50">
                ${formatCreatedDate(entry.Created)}
              </div>
            </div>
          ` : ''}
        `;

        // Add video interaction functionality
        if (mediaType === 'video') {
          const video = card.querySelector('video');
          
          if (isMobile) {
            // Mobile: ensure first frame shows and click to play/pause
            video.addEventListener('loadeddata', () => {
              video.currentTime = 0;
              video.pause();
            });
            
            video.addEventListener('loadedmetadata', () => {
              video.currentTime = 0;
            });
            
            // Double-tap detection for mobile
            let tapCount = 0;
            let tapTimer = null;
            
            card.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              
              tapCount++;
              
              if (tapCount === 1) {
                // First tap - wait for potential second tap
                tapTimer = setTimeout(() => {
                  // Single tap - play/pause video
                  if (video.paused) {
                    // Pause all other featured videos first
                    document.querySelectorAll('.featured-video-mobile').forEach(otherVideo => {
                      if (otherVideo !== video && !otherVideo.paused) {
                        otherVideo.pause();
                        otherVideo.currentTime = 0;
                      }
                    });
                    video.play().catch(e => console.log('Featured video play failed:', e));
                  } else {
                    video.pause();
                    video.currentTime = 0;
                  }
                  tapCount = 0;
                }, 300); // Wait 300ms for second tap
              } else if (tapCount === 2) {
                // Double tap - open lightbox
                clearTimeout(tapTimer);
                showLightbox(url, mediaType);
                tapCount = 0;
              }
            });
            
            // Ensure video starts paused and at beginning
            video.pause();
            video.currentTime = 0;
            
            // Force load the video to show first frame
            video.load();
          } else {
            // Desktop: hover to play
            card.addEventListener('mouseenter', () => video.play().catch(e => {}));
            card.addEventListener('mouseleave', () => {
              video.pause();
              video.currentTime = 0;
            });
            
            // Desktop: click to open lightbox
            card.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation(); 
              showLightbox(url, mediaType);
            });
          }
        } else {
          // Non-video: always click to open lightbox
          card.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation(); 
            showLightbox(url, mediaType);
          });
        }

        featuredGrid.appendChild(card);
      });

      renderPagination(filteredPieces);
    }

    function renderPagination(pieces) {
      const paginationControls = document.getElementById('pagination-controls');
      paginationControls.innerHTML = '';
      const totalPages = Math.ceil(pieces.length / itemsPerPage);

      if (totalPages <= 1) {
          return;
      }

      for (let i = 1; i <= totalPages; i++) {
          const pageButton = document.createElement('button');
          pageButton.textContent = i;
          pageButton.className = `px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${
              i === currentPage 
              ? 'bg-banodoco-purple text-white shadow-md' 
              : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-200'
          }`;
          pageButton.onclick = () => {
            displayPage(i);
            // Smooth scroll to featured section
            const featuredSection = document.getElementById('featured-section');
            if (featuredSection) {
              featuredSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          };
          paginationControls.appendChild(pageButton);
      }
    }

    // Helper functions
    function getFileNameFromUrl(url) {
      return url.split('/').pop() || 'unknown';
    }

    function getFileExtension(fileName) {
      return fileName.split('.').pop().toLowerCase();
    }

    function getMediaType(extension) {
      const videoExts = ['mp4', 'mov', 'avi', 'webm', 'mkv'];
      const imageExts = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'];
      
      if (videoExts.includes(extension)) return 'video';
      if (imageExts.includes(extension)) return 'image';
      return 'file';
    }

    function formatCreatedDate(dateValue) {
      if (!dateValue) return '';
      
      try {
        // Handle different date formats
        let date;
        
        if (typeof dateValue === 'string') {
          // If it's already a formatted string like "May 2024", return as is
          if (dateValue.match(/^[A-Za-z]+ \d{4}$/)) {
            return dateValue;
          }
          
          // Try to parse as ISO string or other common formats
          date = new Date(dateValue);
        } else {
          date = new Date(dateValue);
        }
        
        // Check if date is valid
        if (isNaN(date.getTime())) {
          // If invalid, try to extract month/year from string
          if (typeof dateValue === 'string') {
            const monthYearMatch = dateValue.match(/(\w+)\s+(\d{4})/);
            if (monthYearMatch) {
              return `${monthYearMatch[1]} ${monthYearMatch[2]}`;
            }
          }
          return 'Unknown';
        }
        
        return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
      } catch (error) {
        console.log('Date formatting error:', error, dateValue);
        return 'Unknown';
      }
    }

    function getAvatarColor(name) {
      const colors = [
        'from-purple-500 to-purple-700',
        'from-blue-500 to-blue-700',
        'from-green-500 to-green-700',
        'from-red-500 to-red-700',
        'from-yellow-500 to-yellow-700',
        'from-pink-500 to-pink-700',
        'from-indigo-500 to-indigo-700',
        'from-teal-500 to-teal-700',
        'from-orange-500 to-orange-700',
        'from-emerald-500 to-emerald-700'
      ];
      
      let hash = 0;
      for (let i = 0; i < name.length; i++) {
        hash = name.charCodeAt(i) + ((hash << 5) - hash);
      }
      
      return colors[Math.abs(hash) % colors.length];
    }

    // Load featured pieces when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Wait a bit to ensure Supabase is initialized
      setTimeout(loadFeaturedPieces, 500);
    });

    // Create 16 segments for the title animation
    document.addEventListener('DOMContentLoaded', () => {
      const heroTitle = document.querySelector('.hero-title-enhanced');
      const subtitle   = heroTitle ? heroTitle.nextElementSibling : null; // usually the <h2>

      if (heroTitle) {
        // Create container for segments
        const segmentsContainer = document.createElement('div');
        segmentsContainer.className = 'title-segments';

        // Create 16 individual segments
        for (let i = 0; i < 16; i++) {
          const segment = document.createElement('div');
          segment.className = 'title-segment';
          segmentsContainer.appendChild(segment);
        }

        heroTitle.appendChild(segmentsContainer);

        // Function to align segment bar length & position with subtitle width
        const adjustSegments = () => {
          const heroRect = heroTitle.getBoundingClientRect();

          /*
            The CSS for each segment subtracts a fixed 45 px total gap from
            the container width and then redistributes that gap via `left`.
            This makes the rendered line overshoot its own container by
            `45 * (15 / 16) ≈ 42.19 px`.  We counter-act that here so the
            visible line ends exactly at the same width as the title text.
          */
          const segments = 16;
          const gapPx = 3;              // must match CSS constant
          const totalGap = gapPx * (segments - 1);
          const overflow = totalGap * ((segments - 1) / segments); // 45 * 15/16

          const correctedWidth = heroRect.width - overflow;

          segmentsContainer.style.width = `${correctedWidth}px`;
          segmentsContainer.style.left  = `0px`; // anchor to title left edge
        };

        // Run once after paint
        requestAnimationFrame(adjustSegments);

        // Re-calculate on window resize
        window.addEventListener('resize', adjustSegments);
      }
    });

    // Scroll-triggered animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const animationObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          // Stop observing once animated
          animationObserver.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observe all elements with scroll animation classes
    document.addEventListener('DOMContentLoaded', () => {
      const scrollElements = document.querySelectorAll('.scroll-fade-in, .scroll-fade-in-left, .scroll-fade-in-right, .scroll-scale-in');
      scrollElements.forEach(el => animationObserver.observe(el));
    });

    // Mobile video click-to-play functionality
    function initializeMobileVideoControls() {
      const isMobile = window.innerWidth <= 1024;
      
      if (isMobile) {
        // Handle static mobile videos in hero section
        const mobileVideos = document.querySelectorAll('.mobile-video');
        mobileVideos.forEach(video => {
          // Remove any existing listeners by cloning the element
          const newVideo = video.cloneNode(true);
          video.parentNode.replaceChild(newVideo, video);
          
          // Double-tap detection for mobile hero videos
          let tapCount = 0;
          let tapTimer = null;
          
          newVideo.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            tapCount++;
            
            if (tapCount === 1) {
              // First tap - wait for potential second tap
              tapTimer = setTimeout(() => {
                // Single tap - play/pause video
                if (newVideo.paused) {
                  // Pause all other mobile videos first
                  document.querySelectorAll('.mobile-video').forEach(otherVideo => {
                    if (otherVideo !== newVideo && !otherVideo.paused) {
                      otherVideo.pause();
                      otherVideo.currentTime = 0;
                    }
                  });
                  
                  newVideo.play().catch(e => console.log('Video play failed:', e));
                } else {
                  newVideo.pause();
                  newVideo.currentTime = 0;
                }
                tapCount = 0;
              }, 300); // Wait 300ms for second tap
            } else if (tapCount === 2) {
              // Double tap - open lightbox
              clearTimeout(tapTimer);
              showLightbox(newVideo.src, 'video');
              tapCount = 0;
            }
          });
          
          // Ensure video starts paused on mobile
          newVideo.pause();
          newVideo.currentTime = 0;
          
          // Ensure first frame is visible
          newVideo.addEventListener('loadeddata', () => {
            newVideo.currentTime = 0;
            newVideo.pause();
          });
          
          newVideo.addEventListener('loadedmetadata', () => {
            newVideo.currentTime = 0;
          });
          
          // Force load the video to show first frame
          newVideo.load();
        });
      }
    }

    // Initialize mobile video controls when DOM is ready
    document.addEventListener('DOMContentLoaded', initializeMobileVideoControls);

    // Only re-initialise the mobile video controls when we actually switch
    // between mobile (< =1024 px) and desktop (> 1024 px) viewports. Mobile
    // browsers (e.g. iOS Safari) fire many minor resize events as the address
    // bar shows / hides while scrolling, which previously caused the videos to
    // be re-created over and over, leading to the "refreshing" flicker. By
    // tracking the last breakpoint and comparing it on resize we avoid the
    // unnecessary re-initialisations.
    
    let wasMobileViewport = window.innerWidth <= 1024;
    
    window.addEventListener('resize', () => {
      const isMobileViewport = window.innerWidth <= 1024;
    
      // Only run the expensive re-initialisation if we crossed the breakpoint
      if (isMobileViewport !== wasMobileViewport) {
        wasMobileViewport = isMobileViewport;
        initializeMobileVideoControls();
      }
    });

    // Modify the featured pieces video creation for mobile
    function createFeaturedVideoElement(url, isMobile) {
      if (isMobile) {
        return `<video class="w-full h-full object-cover featured-video-mobile" muted loop preload="metadata" playsinline>
                 <source src="${url}" type="video/mp4">
               </video>`;
      } else {
        return `<video class="w-full h-full object-cover" muted loop>
                 <source src="${url}" type="video/mp4">
               </video>`;
      }
    }

    // Initialize Hover Box
    initializeHoverBox();

    function initializeHoverBox() {
        hoverBox = document.getElementById('key-phrase-hover-box');
        if (!hoverBox) return;

        let hideTimeout;

        const allTriggers = document.querySelectorAll('[data-hover-box]');

        const onMouseEnter = (e) => {
            // If the mouse enters a trigger, clear any pending hide actions
            clearTimeout(hideTimeout);
            // Show the hover box for the current element
            showHoverBox(e, e.currentTarget.dataset, e.currentTarget);
        };

        const onMouseLeave = () => {
            // When the mouse leaves, set a timer to hide the box.
            // This gives the user time to move their mouse over the hover box.
            hideTimeout = setTimeout(hideHoverBox, 100);
        };
        
        const onMouseMove = (e) => {
            // Move the box with the mouse, but only for non-static tooltips
            if (!isStaticHover) {
                moveHoverBox(e);
            }
        };
        
        // Special handler for touch devices
        const onTouchClick = (e) => {
            e.preventDefault();
            e.stopPropagation();
            clearTimeout(hideTimeout);
            showHoverBox(e, e.currentTarget.dataset, e.currentTarget);
            // Do NOT auto-hide; close only on outside tap or scroll (handled inside showHoverBox)
        };

        allTriggers.forEach(trigger => {
            trigger.addEventListener('mouseenter', onMouseEnter);
            trigger.addEventListener('mouseleave', onMouseLeave);
            trigger.addEventListener('mousemove', onMouseMove);
            if (isTouchDevice) {
                trigger.addEventListener('click', onTouchClick);
            }
        });

        // Also add listeners to the hover box itself to prevent it from closing
        // when the user is interacting with it.
        hoverBox.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
        hoverBox.addEventListener('mouseleave', () => {
            hideTimeout = setTimeout(hideHoverBox, 100);
        });
    }

    function showHoverBox(event, dataset, element) {
        if (!hoverBox) return;
        // Cancel any pending content-clear operation from a previous hide event
        clearTimeout(hoverBoxClearTimeout);
        if (!hoverBox) return;

        // Prevent flickering by not re-rendering if already shown for this element
        if (currentHoverElement === element && hoverBox.classList.contains('visible')) {
            return;
        }

        hoverBox.innerHTML = ''; // Clear previous content
        currentHoverElement = element;

        const { hoverType, imagePath, frames, padding, columns, hoverImage, hoverVideo, hoverHtml, overlayText } = dataset;
        
        isStaticHover = hoverType === 'static-info-box';
        
        // Ensure touch devices always use static positioning so the box stays fixed
        if (isTouchDevice) {
            isStaticHover = true;
        }
        
        hoverBox.style.display = 'grid';
        hoverBox.style.gridTemplateColumns = 'none';
        hoverBox.style.gap = '4px';
        hoverBox.classList.toggle('static', isStaticHover);

        if ((hoverType === 'info-box' || hoverType === 'static-info-box') && (hoverImage || hoverHtml)) {
            hoverBox.style.display = 'flex';
            hoverBox.style.alignItems = 'center';
            hoverBox.style.justifyContent = 'center';

            const wrapper = document.createElement('div');
            wrapper.className = 'info-box-wrapper';

            if (hoverHtml) {
                const p = document.createElement('p');
                p.innerHTML = hoverHtml;
                wrapper.appendChild(p);
            }

            if (hoverImage) {
                const imgContainer = document.createElement('div');
                imgContainer.style.position = 'relative';
                
                const img = document.createElement('img');
                img.src = hoverImage;
                imgContainer.appendChild(img);
                
                // Add overlay text if provided
                if (overlayText) {
                    const overlay = document.createElement('div');
                    overlay.className = 'image-overlay-text';
                    overlay.textContent = overlayText;
                    imgContainer.appendChild(overlay);
                }
                
                wrapper.appendChild(imgContainer);
            }
            
            hoverBox.appendChild(wrapper);

        } else if (hoverType === 'video' && hoverVideo) {
            hoverBox.style.display = 'flex';
            hoverBox.style.alignItems = 'center';
            hoverBox.style.justifyContent = 'center';

            const video = document.createElement('video');
            video.className = 'info-box-video';
            video.src = hoverVideo;
            video.autoplay = !isTouchDevice;
            video.loop = !isTouchDevice;
            video.muted = true;
            video.playsinline = true;
            
            if (isTouchDevice) {
                video.addEventListener('loadeddata', () => {
                    try { video.currentTime = 0; video.pause(); } catch (err) {}
                });
                video.load();
            }
             
            hoverBox.appendChild(video);

        } else if (imagePath && frames) {
            const frameCount = parseInt(frames, 10);
            const gridColumns = parseInt(columns, 10) || 4;
            
            hoverBox.style.gridTemplateColumns = `repeat(${gridColumns}, 1fr)`;

            for (let i = 0; i < frameCount; i++) {
                const frameNumber = String(i).padStart(parseInt(padding, 10) || 0, '0');
                const path = imagePath.replace('{{i}}', frameNumber);
                
                const itemContainer = document.createElement('div');
                itemContainer.className = 'hover-box-item';
                itemContainer.style.transitionDelay = `${i * 40}ms`;

                const img = document.createElement('img');
                img.src = path;
                img.alt = `Frame ${i + 1}`;
                img.loading = 'lazy';
                
                const numberOverlay = document.createElement('span');
                numberOverlay.className = 'frame-number';
                numberOverlay.textContent = i + 1;
                numberOverlay.style.transitionDelay = `${100 + (i * 40)}ms`;

                itemContainer.appendChild(img);
                itemContainer.appendChild(numberOverlay);
                
                hoverBox.appendChild(itemContainer);
            }
        } else {
            return; // No valid data
        }

        setTimeout(() => {
            if (hoverType === 'info-box' || hoverType === 'static-info-box') {
                hoverBox.querySelectorAll('.info-box-wrapper p, .info-box-wrapper img, .image-overlay-text').forEach(item => item.classList.add('visible'));
            } else if (hoverType === 'video') {
                hoverBox.querySelectorAll('.info-box-video').forEach(item => item.classList.add('visible'));
            } else {
                hoverBox.querySelectorAll('.hover-box-item, .frame-number').forEach(item => item.classList.add('visible'));
            }
        }, 10);

        hoverBox.classList.add('visible');
        
        if (isStaticHover) {
            positionStaticHoverBox(element);
        } else {
            moveHoverBox(event);
        }

        // Mobile behaviour: keep box open until outside tap or scroll
        if (isTouchDevice) {
            if (!touchOutsideListener) {
                touchOutsideListener = function(ev) {
                    if (hoverBox && !hoverBox.contains(ev.target) && !(currentHoverElement && currentHoverElement.contains(ev.target))) {
                        hideHoverBox();
                    }
                };
                touchScrollListener = function() {
                    hideHoverBox();
                };
                document.addEventListener('touchstart', touchOutsideListener, true);
                window.addEventListener('scroll', touchScrollListener, { passive: true });
            }
        }
    }

    function positionStaticHoverBox(element) {
        if (!hoverBox || !element) return;

        const rect = element.getBoundingClientRect();
        const boxWidth = hoverBox.offsetWidth || 200;
        const boxHeight = hoverBox.offsetHeight || 100;
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const offset = 10;

        let x = rect.left + (rect.width / 2) - (boxWidth / 2);
        let y = rect.bottom + offset;

        // Keep within viewport horizontally
        if (x < 10) x = 10;
        if (x + boxWidth > viewportWidth - 10) x = viewportWidth - boxWidth - 10;

        // If it would go below viewport, show above
        if (y + boxHeight > viewportHeight - 10) {
            y = rect.top - boxHeight - offset;
        }

        // Ensure not above viewport top
        if (y < 10) y = 10;

        hoverBox.style.left = `${x}px`;
        hoverBox.style.top = `${y}px`;
    }

    function hideHoverBox() {
        if (!hoverBox) return;
        hoverBox.classList.remove('visible');
        hoverBox.classList.remove('static');
        isStaticHover = false;
        currentHoverElement = null;
        
        // Modified delayed clear logic – only clear when box is still hidden
        clearTimeout(hoverBoxClearTimeout);
        hoverBoxClearTimeout = setTimeout(() => {
            if (!hoverBox.matches(':hover') && !hoverBox.classList.contains('visible')) {
                hoverBox.innerHTML = '';
            }
        }, 200);

        // Remove mobile listeners if attached
        if (touchOutsideListener) {
            document.removeEventListener('touchstart', touchOutsideListener, true);
            touchOutsideListener = null;
        }
        if (touchScrollListener) {
            window.removeEventListener('scroll', touchScrollListener);
            touchScrollListener = null;
        }
    }

    function moveHoverBox(event) {
        if (!hoverBox || !hoverBox.classList.contains('visible')) return;

        const offsetX = 15;
        const offsetY = 15;
        const boxWidth = hoverBox.offsetWidth;
        const boxHeight = hoverBox.offsetHeight;
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;

        let x = event.clientX + offsetX;
        let y = event.clientY + offsetY;

        // Keep box within viewport
        if (x + boxWidth > viewportWidth) {
            x = event.clientX - boxWidth - offsetX;
        }
        if (y + boxHeight > viewportHeight) {
            y = event.clientY - boxHeight - offsetY;
        }

        hoverBox.style.left = `${x}px`;
        hoverBox.style.top = `${y}px`;
    }
  </script>
</body>
</html>